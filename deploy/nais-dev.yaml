apiVersion: 'nais.io/v1alpha1'
kind: 'Application'
metadata:
    name: rekrutteringsbistand-kandidat
    namespace: q0
    labels:
        team: arbeidsgiver
spec:
    # prettier-ignore
    image: {{ image }}
    port: 8080
    liveness:
        path: /rekrutteringsbistand-kandidat/internal/isAlive
        initialDelay: 5
        timeout: 1
        failureThreshold: 2
    readiness:
        path: /rekrutteringsbistand-kandidat/internal/isReady
        initialDelay: 5
        timeout: 1
    replicas:
        min: 1
        max: 2
    cpuThresholdPercentage: 50
    resources:
        limits:
            cpu: 500m
            memory: 512Mi
        requests:
            cpu: 200m
            memory: 256Mi
    vault:
        enabled: true
    prometheus:
        enabled: false
        path: /metrics
        ingresses:
          - https://rekrutteringsbistand.nais.preprod.local/rekrutteringsbistand-kandidat
      env:
        - name: KANDIDATSOK_API
          value: https://rekrutteringsbistand-kandidat-api.nais.preprod.local/rest
        - name: NODE_EXTRA_CA_CERTS
          value: /etc/ssl/ca-bundle.pem
        - name: LOGINSERVICE_VEILEDER_URL
          value: https://loginservice.nais.preprod.local/login
        - name: LOGINSERVICE_LOGOUT_VEILEDER_URL
          value: https://loginservice.nais.preprod.local/slo
        - name: LAST_NED_CV_URL
          value: https://pam-cv-veileder.nais.preprod.local/cv/pdf
        - name: PAM_SEARCH_API_RESTSERVICE_URL
          value: https://api-gw-q0.adeo.no/pam-search-api/
        - name: PAMPORTAL_URL
          value: https://arbeidsplassen-q.nav.no/
        - name: ARBEIDSRETTET_OPPFOLGING_URL
          value: https://app-q0.adeo.no/veilarbpersonflatefs
        - name: SMS_API
          value: https://arbeidsgiver.nais.preprod.local/rekrutteringsbistand-sms
        - name: MIDLERTIDIG_UTILGJENGELIG_API
          value: https://arbeidsgiver.nais.preprod.local/finn-kandidat-api/midlertidig-utilgjengelig
